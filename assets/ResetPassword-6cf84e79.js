import{r as o,f as b,e as v,a9 as n,j as s,w as k,I as g,ab as S}from"./index-ceef141d.js";import{u as $,t as y}from"./zod-26008f98.js";import{E}from"./error-08a7b626.js";import{H as N}from"./Helmet-244c3607.js";const A="_login_1s321_1",z="_errormessagecontainer_1s321_8",R="_messagecontainer_1s321_17",I="_card_1s321_26",U="_top_1s321_70",Z="_info_1s321_81",L="_buttonWrapper_1s321_85",a={login:A,errormessagecontainer:z,messagecontainer:R,card:I,top:U,info:Z,buttonWrapper:L},M=()=>{var m,p;const[u,i]=o.useState(null),[c,w]=o.useState(null),[f,h]=o.useState(null),_=new b,{t:e}=v(),x=n.object({password:n.string().min(1,{message:e("messages.validation.password")}).min(8,{message:e("messages.validation.validPassword")}).refine(r=>/^(?:(?=.*[a-z])(?=.*[A-Z])(?=.*\d)|(?=.*[a-z])(?=.*[A-Z])(?=.*[.\$\/@!%&*_,#*-+;`])|(?=.*[a-z])(?=.*\d)(?=.*[.\$\/@!%&*_,#*-+;`])|(?=.*[A-Z])(?=.*\d)(?=.*[.\$\/@!%&*_,#*-+;`])|(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[.\$\/@!%&*_,#*-+;`])).*$/.test(r),{message:e("messages.validation.securityPassword")}),confirmPassword:n.string().nonempty({message:e("messages.validation.confirmPassword")})}).refine(r=>r.password===r.confirmPassword,{message:e("messages.validation.matchPassword"),path:["confirmPassword"]}),{register:d,handleSubmit:j,formState:{errors:l}}=$({resolver:y(x),mode:"onSubmit"});o.useEffect(()=>{const r=new URLSearchParams(window.location.search);if(r.has("token")){const t=r.get("token");h(t)}},[]);async function P(r){try{if(await _.resetPassword(r.password,f)==null){i(e("messages.error.token"));return}w(e("messages.success.passwordReset"))}catch{i(e("messages.error.updatePassword"))}}return s.jsx("div",{className:a.login,children:s.jsxs("div",{className:a.card,children:[s.jsxs("div",{className:a.top,children:[s.jsx("img",{src:k,alt:"nefentus logo"}),s.jsx("h3",{children:e("reset-password.title")}),s.jsxs("div",{children:[s.jsx(E,{error:u||((m=l.password)==null?void 0:m.message)||((p=l.confirmPassword)==null?void 0:p.message)}),c&&s.jsx("div",{className:a.messagecontainer,children:s.jsx("p",{style:{color:"green"},children:c})})]})]}),s.jsxs("form",{onSubmit:j(P),children:[s.jsx(g,{register:d,name:"password",label:e("signUp.passwordLabel"),placeholder:e("signUp.passwordPlaceholder"),secure:!0}),s.jsx(g,{register:d,name:"confirmPassword",label:e("reset-password.button-label-confirm"),placeholder:e("signUp.passwordPlaceholder"),secure:!0}),s.jsx(S,{link:null,type:"submit",children:e("reset-password.button")}),s.jsx("div",{className:a.info,children:s.jsx("p",{children:e("reset-password.info")})})]})]})})},B=()=>s.jsxs("div",{className:"dashboardFont",children:[s.jsx(N,{children:s.jsx("title",{children:"Nefentus | Password-forgot"})}),s.jsx(M,{})]});export{B as default};

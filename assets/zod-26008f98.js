import{a1 as z}from"./index-ceef141d.js";var ae=e=>e.type==="checkbox",te=e=>e instanceof Date,T=e=>e==null;const Ye=e=>typeof e=="object";var E=e=>!T(e)&&!Array.isArray(e)&&Ye(e)&&!te(e),hr=e=>E(e)&&e.target?ae(e.target)?e.target.checked:e.target.value:e,vr=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,gr=(e,i)=>e.has(vr(i)),Vr=e=>{const i=e.constructor&&e.constructor.prototype;return E(i)&&i.hasOwnProperty("isPrototypeOf")},Ee=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function $(e){let i;const s=Array.isArray(e);if(e instanceof Date)i=new Date(e);else if(e instanceof Set)i=new Set(e);else if(!(Ee&&(e instanceof Blob||e instanceof FileList))&&(s||E(e)))if(i=s?[]:{},!s&&!Vr(e))i=e;else for(const t in e)e.hasOwnProperty(t)&&(i[t]=$(e[t]));else return e;return i}var le=e=>Array.isArray(e)?e.filter(Boolean):[],k=e=>e===void 0,d=(e,i,s)=>{if(!i||!E(e))return s;const t=le(i.split(/[,[\].]+?/)).reduce((l,u)=>T(l)?l:l[u],e);return k(t)||t===e?k(e[i])?s:e[i]:t},X=e=>typeof e=="boolean";const We={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},M={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},H={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"};z.createContext(null);var _r=(e,i,s,t=!0)=>{const l={defaultValues:i._defaultValues};for(const u in e)Object.defineProperty(l,u,{get:()=>{const f=u;return i._proxyFormState[f]!==M.all&&(i._proxyFormState[f]=!t||M.all),s&&(s[f]=!0),e[f]}});return l},N=e=>E(e)&&!Object.keys(e).length,br=(e,i,s,t)=>{s(e);const{name:l,...u}=e;return N(u)||Object.keys(u).length>=Object.keys(i).length||Object.keys(u).find(f=>i[f]===(!t||M.all))},Fe=e=>Array.isArray(e)?e:[e];function Ar(e){const i=z.useRef(e);i.current=e,z.useEffect(()=>{const s=!e.disabled&&i.current.subject&&i.current.subject.subscribe({next:i.current.next});return()=>{s&&s.unsubscribe()}},[e.disabled])}var I=e=>typeof e=="string",xr=(e,i,s,t,l)=>I(e)?(t&&i.watch.add(e),d(s,e,l)):Array.isArray(e)?e.map(u=>(t&&i.watch.add(u),d(s,u))):(t&&(i.watchAll=!0),s),pe=e=>/^\w*$/.test(e),Ze=e=>le(e.replace(/["|']|\]/g,"").split(/\.|\[/));function x(e,i,s){let t=-1;const l=pe(i)?[i]:Ze(i),u=l.length,f=u-1;for(;++t<u;){const V=l[t];let v=s;if(t!==f){const S=e[V];v=E(S)||Array.isArray(S)?S:isNaN(+l[t+1])?{}:[]}e[V]=v,e=e[V]}return e}var er=(e,i,s,t,l)=>i?{...s[e],types:{...s[e]&&s[e].types?s[e].types:{},[t]:l||!0}}:{};const Se=(e,i,s)=>{for(const t of s||Object.keys(e)){const l=d(e,t);if(l){const{_f:u,...f}=l;if(u&&i(u.name)){if(u.ref.focus){u.ref.focus();break}else if(u.refs&&u.refs[0].focus){u.refs[0].focus();break}}else E(f)&&Se(f,i)}}};var He=e=>({isOnSubmit:!e||e===M.onSubmit,isOnBlur:e===M.onBlur,isOnChange:e===M.onChange,isOnAll:e===M.all,isOnTouch:e===M.onTouched}),$e=(e,i,s)=>!s&&(i.watchAll||i.watch.has(e)||[...i.watch].some(t=>e.startsWith(t)&&/^\.\w+/.test(e.slice(t.length)))),Fr=(e,i,s)=>{const t=le(d(e,s));return x(t,"root",i[s]),x(e,s,t),e},Oe=e=>e.type==="file",G=e=>typeof e=="function",ce=e=>{if(!Ee)return!1;const i=e?e.ownerDocument:0;return e instanceof(i&&i.defaultView?i.defaultView.HTMLElement:HTMLElement)},fe=e=>I(e),Te=e=>e.type==="radio",de=e=>e instanceof RegExp;const je={value:!1,isValid:!1},Ke={value:!0,isValid:!0};var rr=e=>{if(Array.isArray(e)){if(e.length>1){const i=e.filter(s=>s&&s.checked&&!s.disabled).map(s=>s.value);return{value:i,isValid:!!i.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!k(e[0].attributes.value)?k(e[0].value)||e[0].value===""?Ke:{value:e[0].value,isValid:!0}:Ke:je}return je};const ze={isValid:!1,value:null};var tr=e=>Array.isArray(e)?e.reduce((i,s)=>s&&s.checked&&!s.disabled?{isValid:!0,value:s.value}:i,ze):ze;function Ge(e,i,s="validate"){if(fe(e)||Array.isArray(e)&&e.every(fe)||X(e)&&!e)return{type:s,message:fe(e)?e:"",ref:i}}var re=e=>E(e)&&!de(e)?e:{value:e,message:""},Je=async(e,i,s,t,l)=>{const{ref:u,refs:f,required:V,maxLength:v,minLength:S,min:j,max:w,pattern:b,validate:K,name:C,valueAsNumber:ve,mount:oe,disabled:ge}=e._f,g=d(i,C);if(!oe||ge)return{};const R=f?f[0]:u,q=A=>{t&&R.reportValidity&&(R.setCustomValidity(X(A)?"":A||""),R.reportValidity())},p={},se=Te(u),Z=ae(u),Ve=se||Z,B=(ve||Oe(u))&&k(u.value)&&k(g)||ce(u)&&u.value===""||g===""||Array.isArray(g)&&!g.length,J=er.bind(null,C,s,p),W=(A,_,m,L=H.maxLength,U=H.minLength)=>{const P=A?_:m;p[C]={type:A?L:U,message:P,ref:u,...J(A?L:U,P)}};if(l?!Array.isArray(g)||!g.length:V&&(!Ve&&(B||T(g))||X(g)&&!g||Z&&!rr(f).isValid||se&&!tr(f).isValid)){const{value:A,message:_}=fe(V)?{value:!!V,message:V}:re(V);if(A&&(p[C]={type:H.required,message:_,ref:R,...J(H.required,_)},!s))return q(_),p}if(!B&&(!T(j)||!T(w))){let A,_;const m=re(w),L=re(j);if(!T(g)&&!isNaN(g)){const U=u.valueAsNumber||g&&+g;T(m.value)||(A=U>m.value),T(L.value)||(_=U<L.value)}else{const U=u.valueAsDate||new Date(g),P=ne=>new Date(new Date().toDateString()+" "+ne),Q=u.type=="time",ie=u.type=="week";I(m.value)&&g&&(A=Q?P(g)>P(m.value):ie?g>m.value:U>new Date(m.value)),I(L.value)&&g&&(_=Q?P(g)<P(L.value):ie?g<L.value:U<new Date(L.value))}if((A||_)&&(W(!!A,m.message,L.message,H.max,H.min),!s))return q(p[C].message),p}if((v||S)&&!B&&(I(g)||l&&Array.isArray(g))){const A=re(v),_=re(S),m=!T(A.value)&&g.length>+A.value,L=!T(_.value)&&g.length<+_.value;if((m||L)&&(W(m,A.message,_.message),!s))return q(p[C].message),p}if(b&&!B&&I(g)){const{value:A,message:_}=re(b);if(de(A)&&!g.match(A)&&(p[C]={type:H.pattern,message:_,ref:u,...J(H.pattern,_)},!s))return q(_),p}if(K){if(G(K)){const A=await K(g,i),_=Ge(A,R);if(_&&(p[C]={..._,...J(H.validate,_.message)},!s))return q(_.message),p}else if(E(K)){let A={};for(const _ in K){if(!N(A)&&!s)break;const m=Ge(await K[_](g,i),R,_);m&&(A={...m,...J(_,m.message)},q(m.message),s&&(p[C]=A))}if(!N(A)&&(p[C]={ref:R,...A},!s))return p}}return q(!0),p};function wr(e,i){const s=i.slice(0,-1).length;let t=0;for(;t<s;)e=k(e)?t++:e[i[t++]];return e}function mr(e){for(const i in e)if(e.hasOwnProperty(i)&&!k(e[i]))return!1;return!0}function O(e,i){const s=Array.isArray(i)?i:pe(i)?[i]:Ze(i),t=s.length===1?e:wr(e,s),l=s.length-1,u=s[l];return t&&delete t[u],l!==0&&(E(t)&&N(t)||Array.isArray(t)&&mr(t))&&O(e,s.slice(0,-1)),e}function we(){let e=[];return{get observers(){return e},next:l=>{for(const u of e)u.next&&u.next(l)},subscribe:l=>(e.push(l),{unsubscribe:()=>{e=e.filter(u=>u!==l)}}),unsubscribe:()=>{e=[]}}}var ye=e=>T(e)||!Ye(e);function Y(e,i){if(ye(e)||ye(i))return e===i;if(te(e)&&te(i))return e.getTime()===i.getTime();const s=Object.keys(e),t=Object.keys(i);if(s.length!==t.length)return!1;for(const l of s){const u=e[l];if(!t.includes(l))return!1;if(l!=="ref"){const f=i[l];if(te(u)&&te(f)||E(u)&&E(f)||Array.isArray(u)&&Array.isArray(f)?!Y(u,f):u!==f)return!1}}return!0}var sr=e=>e.type==="select-multiple",Dr=e=>Te(e)||ae(e),me=e=>ce(e)&&e.isConnected,ir=e=>{for(const i in e)if(G(e[i]))return!0;return!1};function he(e,i={}){const s=Array.isArray(e);if(E(e)||s)for(const t in e)Array.isArray(e[t])||E(e[t])&&!ir(e[t])?(i[t]=Array.isArray(e[t])?[]:{},he(e[t],i[t])):T(e[t])||(i[t]=!0);return i}function nr(e,i,s){const t=Array.isArray(e);if(E(e)||t)for(const l in e)Array.isArray(e[l])||E(e[l])&&!ir(e[l])?k(i)||ye(s[l])?s[l]=Array.isArray(e[l])?he(e[l],[]):{...he(e[l])}:nr(e[l],T(i)?{}:i[l],s[l]):s[l]=!Y(e[l],i[l]);return s}var De=(e,i)=>nr(e,i,he(i)),ur=(e,{valueAsNumber:i,valueAsDate:s,setValueAs:t})=>k(e)?e:i?e===""?NaN:e&&+e:s&&I(e)?new Date(e):t?t(e):e;function ke(e){const i=e.ref;if(!(e.refs?e.refs.every(s=>s.disabled):i.disabled))return Oe(i)?i.files:Te(i)?tr(e.refs).value:sr(i)?[...i.selectedOptions].map(({value:s})=>s):ae(i)?rr(e.refs).value:ur(k(i.value)?e.ref.value:i.value,e)}var kr=(e,i,s,t)=>{const l={};for(const u of e){const f=d(i,u);f&&x(l,u,f._f)}return{criteriaMode:s,names:[...e],fields:l,shouldUseNativeValidation:t}},ue=e=>k(e)?e:de(e)?e.source:E(e)?de(e.value)?e.value.source:e.value:e,Sr=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate);function Qe(e,i,s){const t=d(e,s);if(t||pe(s))return{error:t,name:s};const l=s.split(".");for(;l.length;){const u=l.join("."),f=d(i,u),V=d(e,u);if(f&&!Array.isArray(f)&&s!==u)return{name:s};if(V&&V.type)return{name:u,error:V};l.pop()}return{name:s}}var Er=(e,i,s,t,l)=>l.isOnAll?!1:!s&&l.isOnTouch?!(i||e):(s?t.isOnBlur:l.isOnBlur)?!e:(s?t.isOnChange:l.isOnChange)?e:!0,pr=(e,i)=>!le(d(e,i)).length&&O(e,i);const Or={mode:M.onSubmit,reValidateMode:M.onChange,shouldFocusError:!0};function Tr(e={},i){let s={...Or,...e},t={submitCount:0,isDirty:!1,isLoading:G(s.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},errors:{}},l={},u=E(s.defaultValues)||E(s.values)?$(s.defaultValues||s.values)||{}:{},f=s.shouldUnregister?{}:$(u),V={action:!1,mount:!1,watch:!1},v={mount:new Set,unMount:new Set,array:new Set,watch:new Set},S,j=0;const w={isDirty:!1,dirtyFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},b={values:we(),array:we(),state:we()},K=e.resetOptions&&e.resetOptions.keepDirtyValues,C=He(s.mode),ve=He(s.reValidateMode),oe=s.criteriaMode===M.all,ge=r=>n=>{clearTimeout(j),j=setTimeout(r,n)},g=async r=>{if(w.isValid||r){const n=s.resolver?N((await B()).errors):await W(l,!0);n!==t.isValid&&b.state.next({isValid:n})}},R=r=>w.isValidating&&b.state.next({isValidating:r}),q=(r,n=[],a,y,c=!0,o=!0)=>{if(y&&a){if(V.action=!0,o&&Array.isArray(d(l,r))){const h=a(d(l,r),y.argA,y.argB);c&&x(l,r,h)}if(o&&Array.isArray(d(t.errors,r))){const h=a(d(t.errors,r),y.argA,y.argB);c&&x(t.errors,r,h),pr(t.errors,r)}if(w.touchedFields&&o&&Array.isArray(d(t.touchedFields,r))){const h=a(d(t.touchedFields,r),y.argA,y.argB);c&&x(t.touchedFields,r,h)}w.dirtyFields&&(t.dirtyFields=De(u,f)),b.state.next({name:r,isDirty:_(r,n),dirtyFields:t.dirtyFields,errors:t.errors,isValid:t.isValid})}else x(f,r,n)},p=(r,n)=>{x(t.errors,r,n),b.state.next({errors:t.errors})},se=(r,n,a,y)=>{const c=d(l,r);if(c){const o=d(f,r,k(a)?d(u,r):a);k(o)||y&&y.defaultChecked||n?x(f,r,n?o:ke(c._f)):U(r,o),V.mount&&g()}},Z=(r,n,a,y,c)=>{let o=!1,h=!1;const F={name:r};if(!a||y){w.isDirty&&(h=t.isDirty,t.isDirty=F.isDirty=_(),o=h!==F.isDirty);const D=Y(d(u,r),n);h=d(t.dirtyFields,r),D?O(t.dirtyFields,r):x(t.dirtyFields,r,!0),F.dirtyFields=t.dirtyFields,o=o||w.dirtyFields&&h!==!D}if(a){const D=d(t.touchedFields,r);D||(x(t.touchedFields,r,a),F.touchedFields=t.touchedFields,o=o||w.touchedFields&&D!==a)}return o&&c&&b.state.next(F),o?F:{}},Ve=(r,n,a,y)=>{const c=d(t.errors,r),o=w.isValid&&X(n)&&t.isValid!==n;if(e.delayError&&a?(S=ge(()=>p(r,a)),S(e.delayError)):(clearTimeout(j),S=null,a?x(t.errors,r,a):O(t.errors,r)),(a?!Y(c,a):c)||!N(y)||o){const h={...y,...o&&X(n)?{isValid:n}:{},errors:t.errors,name:r};t={...t,...h},b.state.next(h)}R(!1)},B=async r=>s.resolver(f,s.context,kr(r||v.mount,l,s.criteriaMode,s.shouldUseNativeValidation)),J=async r=>{const{errors:n}=await B(r);if(r)for(const a of r){const y=d(n,a);y?x(t.errors,a,y):O(t.errors,a)}else t.errors=n;return n},W=async(r,n,a={valid:!0})=>{for(const y in r){const c=r[y];if(c){const{_f:o,...h}=c;if(o){const F=v.array.has(o.name),D=await Je(c,f,oe,s.shouldUseNativeValidation&&!n,F);if(D[o.name]&&(a.valid=!1,n))break;!n&&(d(D,o.name)?F?Fr(t.errors,D,o.name):x(t.errors,o.name,D[o.name]):O(t.errors,o.name))}h&&await W(h,n,a)}}return a.valid},A=()=>{for(const r of v.unMount){const n=d(l,r);n&&(n._f.refs?n._f.refs.every(a=>!me(a)):!me(n._f.ref))&&_e(r)}v.unMount=new Set},_=(r,n)=>(r&&n&&x(f,r,n),!Y(Le(),u)),m=(r,n,a)=>xr(r,v,{...V.mount?f:k(n)?u:I(r)?{[r]:n}:n},a,n),L=r=>le(d(V.mount?f:u,r,e.shouldUnregister?d(u,r,[]):[])),U=(r,n,a={})=>{const y=d(l,r);let c=n;if(y){const o=y._f;o&&(!o.disabled&&x(f,r,ur(n,o)),c=ce(o.ref)&&T(n)?"":n,sr(o.ref)?[...o.ref.options].forEach(h=>h.selected=c.includes(h.value)):o.refs?ae(o.ref)?o.refs.length>1?o.refs.forEach(h=>(!h.defaultChecked||!h.disabled)&&(h.checked=Array.isArray(c)?!!c.find(F=>F===h.value):c===h.value)):o.refs[0]&&(o.refs[0].checked=!!c):o.refs.forEach(h=>h.checked=h.value===c):Oe(o.ref)?o.ref.value="":(o.ref.value=c,o.ref.type||b.values.next({name:r,values:{...f}})))}(a.shouldDirty||a.shouldTouch)&&Z(r,c,a.shouldTouch,a.shouldDirty,!0),a.shouldValidate&&ne(r)},P=(r,n,a)=>{for(const y in n){const c=n[y],o=`${r}.${y}`,h=d(l,o);(v.array.has(r)||!ye(c)||h&&!h._f)&&!te(c)?P(o,c,a):U(o,c,a)}},Q=(r,n,a={})=>{const y=d(l,r),c=v.array.has(r),o=$(n);x(f,r,o),c?(b.array.next({name:r,values:{...f}}),(w.isDirty||w.dirtyFields)&&a.shouldDirty&&b.state.next({name:r,dirtyFields:De(u,f),isDirty:_(r,o)})):y&&!y._f&&!T(o)?P(r,o,a):U(r,o,a),$e(r,v)&&b.state.next({...t}),b.values.next({name:r,values:{...f}}),!V.mount&&i()},ie=async r=>{const n=r.target;let a=n.name,y=!0;const c=d(l,a),o=()=>n.type?ke(c._f):hr(r);if(c){let h,F;const D=o(),ee=r.type===We.BLUR||r.type===We.FOCUS_OUT,cr=!Sr(c._f)&&!s.resolver&&!d(t.errors,a)&&!c._f.deps||Er(ee,d(t.touchedFields,a),t.isSubmitted,ve,C),Ae=$e(a,v,ee);x(f,a,D),ee?(c._f.onBlur&&c._f.onBlur(r),S&&S(0)):c._f.onChange&&c._f.onChange(r);const xe=Z(a,D,ee,!1),dr=!N(xe)||Ae;if(!ee&&b.values.next({name:a,type:r.type,values:{...f}}),cr)return w.isValid&&g(),dr&&b.state.next({name:a,...Ae?{}:xe});if(!ee&&Ae&&b.state.next({...t}),R(!0),s.resolver){const{errors:Ie}=await B([a]),yr=Qe(t.errors,l,a),qe=Qe(Ie,l,yr.name||a);h=qe.error,a=qe.name,F=N(Ie)}else h=(await Je(c,f,oe,s.shouldUseNativeValidation))[a],y=Number.isNaN(D)||D===d(f,a,D),y&&(h?F=!1:w.isValid&&(F=await W(l,!0)));y&&(c._f.deps&&ne(c._f.deps),Ve(a,F,h,xe))}},ne=async(r,n={})=>{let a,y;const c=Fe(r);if(R(!0),s.resolver){const o=await J(k(r)?r:c);a=N(o),y=r?!c.some(h=>d(o,h)):a}else r?(y=(await Promise.all(c.map(async o=>{const h=d(l,o);return await W(h&&h._f?{[o]:h}:h)}))).every(Boolean),!(!y&&!t.isValid)&&g()):y=a=await W(l);return b.state.next({...!I(r)||w.isValid&&a!==t.isValid?{}:{name:r},...s.resolver||!r?{isValid:a}:{},errors:t.errors,isValidating:!1}),n.shouldFocus&&!y&&Se(l,o=>o&&d(t.errors,o),r?c:v.mount),y},Le=r=>{const n={...u,...V.mount?f:{}};return k(r)?n:I(r)?d(n,r):r.map(a=>d(n,a))},Ce=(r,n)=>({invalid:!!d((n||t).errors,r),isDirty:!!d((n||t).dirtyFields,r),isTouched:!!d((n||t).touchedFields,r),error:d((n||t).errors,r)}),lr=r=>{r&&Fe(r).forEach(n=>O(t.errors,n)),b.state.next({errors:r?t.errors:{}})},Ue=(r,n,a)=>{const y=(d(l,r,{_f:{}})._f||{}).ref;x(t.errors,r,{...n,ref:y}),b.state.next({name:r,errors:t.errors,isValid:!1}),a&&a.shouldFocus&&y&&y.focus&&y.focus()},or=(r,n)=>G(r)?b.values.subscribe({next:a=>r(m(void 0,n),a)}):m(r,n,!0),_e=(r,n={})=>{for(const a of r?Fe(r):v.mount)v.mount.delete(a),v.array.delete(a),n.keepValue||(O(l,a),O(f,a)),!n.keepError&&O(t.errors,a),!n.keepDirty&&O(t.dirtyFields,a),!n.keepTouched&&O(t.touchedFields,a),!s.shouldUnregister&&!n.keepDefaultValue&&O(u,a);b.values.next({values:{...f}}),b.state.next({...t,...n.keepDirty?{isDirty:_()}:{}}),!n.keepIsValid&&g()},Ne=({disabled:r,name:n,field:a,fields:y})=>{if(X(r)){const c=r?void 0:d(f,n,ke(a?a._f:d(y,n)._f));x(f,n,c),Z(n,c,!1,!1,!0)}},be=(r,n={})=>{let a=d(l,r);const y=X(n.disabled);return x(l,r,{...a||{},_f:{...a&&a._f?a._f:{ref:{name:r}},name:r,mount:!0,...n}}),v.mount.add(r),a?Ne({field:a,disabled:n.disabled,name:r}):se(r,!0,n.value),{...y?{disabled:n.disabled}:{},...s.progressive?{required:!!n.required,min:ue(n.min),max:ue(n.max),minLength:ue(n.minLength),maxLength:ue(n.maxLength),pattern:ue(n.pattern)}:{},name:r,onChange:ie,onBlur:ie,ref:c=>{if(c){be(r,n),a=d(l,r);const o=k(c.value)&&c.querySelectorAll&&c.querySelectorAll("input,select,textarea")[0]||c,h=Dr(o),F=a._f.refs||[];if(h?F.find(D=>D===o):o===a._f.ref)return;x(l,r,{_f:{...a._f,...h?{refs:[...F.filter(me),o,...Array.isArray(d(u,r))?[{}]:[]],ref:{type:o.type,name:r}}:{ref:o}}}),se(r,!1,void 0,o)}else a=d(l,r,{}),a._f&&(a._f.mount=!1),(s.shouldUnregister||n.shouldUnregister)&&!(gr(v.array,r)&&V.action)&&v.unMount.add(r)}}},Re=()=>s.shouldFocusError&&Se(l,r=>r&&d(t.errors,r),v.mount),Me=(r,n)=>async a=>{a&&(a.preventDefault&&a.preventDefault(),a.persist&&a.persist());let y=$(f);if(b.state.next({isSubmitting:!0}),s.resolver){const{errors:c,values:o}=await B();t.errors=c,y=o}else await W(l);O(t.errors,"root"),N(t.errors)?(b.state.next({errors:{}}),await r(y,a)):(n&&await n({...t.errors},a),Re(),setTimeout(Re)),b.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:N(t.errors),submitCount:t.submitCount+1,errors:t.errors})},fr=(r,n={})=>{d(l,r)&&(k(n.defaultValue)?Q(r,d(u,r)):(Q(r,n.defaultValue),x(u,r,n.defaultValue)),n.keepTouched||O(t.touchedFields,r),n.keepDirty||(O(t.dirtyFields,r),t.isDirty=n.defaultValue?_(r,d(u,r)):_()),n.keepError||(O(t.errors,r),w.isValid&&g()),b.state.next({...t}))},Be=(r,n={})=>{const a=r?$(r):u,y=$(a),c=r&&!N(r)?y:u;if(n.keepDefaultValues||(u=a),!n.keepValues){if(n.keepDirtyValues||K)for(const o of v.mount)d(t.dirtyFields,o)?x(c,o,d(f,o)):Q(o,d(c,o));else{if(Ee&&k(r))for(const o of v.mount){const h=d(l,o);if(h&&h._f){const F=Array.isArray(h._f.refs)?h._f.refs[0]:h._f.ref;if(ce(F)){const D=F.closest("form");if(D){D.reset();break}}}}l={}}f=e.shouldUnregister?n.keepDefaultValues?$(u):{}:$(c),b.array.next({values:{...c}}),b.values.next({values:{...c}})}v={mount:new Set,unMount:new Set,array:new Set,watch:new Set,watchAll:!1,focus:""},!V.mount&&i(),V.mount=!w.isValid||!!n.keepIsValid,V.watch=!!e.shouldUnregister,b.state.next({submitCount:n.keepSubmitCount?t.submitCount:0,isDirty:n.keepDirty?t.isDirty:!!(n.keepDefaultValues&&!Y(r,u)),isSubmitted:n.keepIsSubmitted?t.isSubmitted:!1,dirtyFields:n.keepDirtyValues?t.dirtyFields:n.keepDefaultValues&&r?De(u,r):{},touchedFields:n.keepTouched?t.touchedFields:{},errors:n.keepErrors?t.errors:{},isSubmitSuccessful:n.keepIsSubmitSuccessful?t.isSubmitSuccessful:!1,isSubmitting:!1})},Pe=(r,n)=>Be(G(r)?r(f):r,n);return{control:{register:be,unregister:_e,getFieldState:Ce,handleSubmit:Me,setError:Ue,_executeSchema:B,_getWatch:m,_getDirty:_,_updateValid:g,_removeUnmounted:A,_updateFieldArray:q,_updateDisabledField:Ne,_getFieldArray:L,_reset:Be,_resetDefaultValues:()=>G(s.defaultValues)&&s.defaultValues().then(r=>{Pe(r,s.resetOptions),b.state.next({isLoading:!1})}),_updateFormState:r=>{t={...t,...r}},_subjects:b,_proxyFormState:w,get _fields(){return l},get _formValues(){return f},get _state(){return V},set _state(r){V=r},get _defaultValues(){return u},get _names(){return v},set _names(r){v=r},get _formState(){return t},set _formState(r){t=r},get _options(){return s},set _options(r){s={...s,...r}}},trigger:ne,register:be,handleSubmit:Me,watch:or,setValue:Q,getValues:Le,reset:Pe,resetField:fr,clearErrors:lr,unregister:_e,setError:Ue,setFocus:(r,n={})=>{const a=d(l,r),y=a&&a._f;if(y){const c=y.refs?y.refs[0]:y.ref;c.focus&&(c.focus(),n.shouldSelect&&c.select())}},getFieldState:Ce}}function Ir(e={}){const i=z.useRef(),s=z.useRef(),[t,l]=z.useState({isDirty:!1,isValidating:!1,isLoading:G(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},errors:{},defaultValues:G(e.defaultValues)?void 0:e.defaultValues});i.current||(i.current={...Tr(e,()=>l(f=>({...f}))),formState:t});const u=i.current.control;return u._options=e,Ar({subject:u._subjects.state,next:f=>{br(f,u._proxyFormState,u._updateFormState,!0)&&l({...u._formState})}}),z.useEffect(()=>{e.values&&!Y(e.values,s.current)?(u._reset(e.values,u._options.resetOptions),s.current=e.values):u._resetDefaultValues()},[e.values,u]),z.useEffect(()=>{u._state.mount||(u._updateValid(),u._state.mount=!0),u._state.watch&&(u._state.watch=!1,u._subjects.state.next({...u._formState})),u._removeUnmounted()}),i.current.formState=_r(t,u),i.current}var Xe=function(e,i,s){if(e&&"reportValidity"in e){var t=d(s,i);e.setCustomValidity(t&&t.message||""),e.reportValidity()}},ar=function(e,i){var s=function(l){var u=i.fields[l];u&&u.ref&&"reportValidity"in u.ref?Xe(u.ref,l,e):u.refs&&u.refs.forEach(function(f){return Xe(f,l,e)})};for(var t in i.fields)s(t)},Lr=function(e,i){i.shouldUseNativeValidation&&ar(e,i);var s={};for(var t in e){var l=d(i.fields,t),u=Object.assign(e[t]||{},{ref:l&&l.ref});if(Ur(i.names||Object.keys(e),t)){var f=Object.assign({},Cr(d(s,t)));x(f,"root",u),x(s,t,f)}else x(s,t,u)}return s},Cr=function(e){return Array.isArray(e)?e.filter(Boolean):[]},Ur=function(e,i){return e.some(function(s){return s.startsWith(i+".")})},Nr=function(e,i){for(var s={};e.length;){var t=e[0],l=t.code,u=t.message,f=t.path.join(".");if(!s[f])if("unionErrors"in t){var V=t.unionErrors[0].errors[0];s[f]={message:V.message,type:V.code}}else s[f]={message:u,type:l};if("unionErrors"in t&&t.unionErrors.forEach(function(j){return j.errors.forEach(function(w){return e.push(w)})}),i){var v=s[f].types,S=v&&v[t.code];s[f]=er(f,i,s,l,S?[].concat(S,t.message):t.message)}e.shift()}return s},qr=function(e,i,s){return s===void 0&&(s={}),function(t,l,u){try{return Promise.resolve(function(f,V){try{var v=Promise.resolve(e[s.mode==="sync"?"parse":"parseAsync"](t,i)).then(function(S){return u.shouldUseNativeValidation&&ar({},u),{errors:{},values:s.raw?t:S}})}catch(S){return V(S)}return v&&v.then?v.then(void 0,V):v}(0,function(f){if(function(V){return V.errors!=null}(f))return{values:{},errors:Lr(Nr(f.errors,!u.shouldUseNativeValidation&&u.criteriaMode==="all"),u)};throw f}))}catch(f){return Promise.reject(f)}}};export{qr as t,Ir as u};
